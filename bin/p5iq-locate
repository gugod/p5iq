#!/usr/bin/env perl
use v5.14;
use warnings;

use FindBin;
use lib "${FindBin::Bin}/../local/lib/perl5";
use lib "${FindBin::Bin}/../lib";

use P5iq::Search;

use Getopt::Long;

my %args;
GetOptions(
    \%args,
    "s|size=i",
    "symbol",
    "sub-named",
    "hash-keys",
    "hash-name",
    "var-def",
    "arglist",
    "whohas",
);

my $query_string = shift // die "No query string...";
if( $args{'hash-name'} ){
    P5iq::Search::locate_hash_name($query_string, $args{size});
}
elsif ($args{'arglist'}) {
    P5iq::Search::locate_arglist($query_string, $args{size});
}
elsif ($args{'whohas'}) {
    P5iq::Search::locate_method_calls($query_string, $args{size});
}
else {
    P5iq::Search::locate_symbols($query_string, $args{size}, $args{symbol}, $args{'sub-named'}, $args{'hash-keys'});
}
